# LoginContract è®¾è®¡æ€»ç»“

## ğŸ“‹ è®¾è®¡å›ç­”

### 1. å‘½åä¼˜åŒ–

#### âœ… targetNumber â†’ targetCount
**æ¨è**ï¼šæ˜¯çš„ï¼Œæ”¹ä¸º `targetCount` æ›´åˆé€‚
- ä¸ `count` ä¿æŒå‘½åä¸€è‡´æ€§
- æ›´æ¸…æ™°è¡¨è¾¾"ç›®æ ‡è®¡æ•°å€¼"çš„å«ä¹‰
- ç¬¦åˆå˜é‡å‘½åçš„ç»Ÿä¸€é£æ ¼

#### âœ… randomCount() çš„ä½ç½®
**æ¨è**ï¼šæ”¾åœ¨ `Companion Object` ä¸­ï¼ˆå·²é‡‡ç”¨ï¼‰
```kotlin
companion object {
    const val COUNT_MAX = 100
    const val COUNT_MIN = 0
    
    fun randomCount(): Int = Random.nextInt(COUNT_MIN, COUNT_MAX + 1)
}
```
**ç†ç”±**ï¼š
- ä¸ç›¸å…³å¸¸é‡ï¼ˆMAX/MINï¼‰æ”¾åœ¨ä¸€èµ·
- ä½œä¸ºå·¥å…·å‡½æ•°ï¼Œä¸ä¾èµ–å®ä¾‹çŠ¶æ€
- ä¾¿äºæµ‹è¯•å’Œå¤ç”¨

#### âœ… incrementDecrementIntents ç®€åŒ–å‘½å
**æ¨è**ï¼š`counterIntents()` æˆ– `modifyIntents()`
- `counterIntents()` - **æœ€ä½³é€‰æ‹©**ï¼Œæ˜ç¡®è¡¨ç¤ºè®¡æ•°å™¨ç›¸å…³çš„æ„å›¾
- `modifyIntents()` - æ›´é€šç”¨ï¼Œè¡¨ç¤ºä¿®æ”¹ç±»æ“ä½œ
- `adjustIntents()` - è¡¨ç¤ºè°ƒæ•´æ“ä½œ

å·²åœ¨ä»£ç ä¸­é‡‡ç”¨ï¼š
```kotlin
private fun counterIntents(): Flow<Intent> = merge(
    binding.increment.doOnClick { trySend(Intent.Increment) },
    binding.decrement.doOnClick { trySend(Intent.Decrement) },
)
```

### 2. ç®€å•ç¤ºä¾‹æ¨è

é™¤äº† Counterï¼Œä»¥ä¸‹æ˜¯é€‚åˆ MVI å…¥é—¨çš„ç®€å•ç¤ºä¾‹ï¼š

#### âœ… å·²å®ç°ï¼šAuthentication (Login)
**ç‰¹ç‚¹**ï¼š
- è¡¨å•å¤„ç†ï¼ˆè¾“å…¥éªŒè¯ï¼‰
- å¼‚æ­¥æ“ä½œï¼ˆç™»å½•/ç™»å‡ºï¼‰
- çŠ¶æ€åˆ‡æ¢ï¼ˆæœªç™»å½• â†”ï¸ å·²ç™»å½•ï¼‰
- é”™è¯¯å¤„ç†

**ç›®å½•å**ï¼š`login` / `auth` / `authentication`

#### ğŸ¯ å…¶ä»–æ¨èç¤ºä¾‹

1. **Todo List**
   - ç›®å½•åï¼š`todo`
   - åŠŸèƒ½ï¼šæ·»åŠ ã€åˆ é™¤ã€å®Œæˆã€ç­›é€‰ä»»åŠ¡
   - é€‚åˆå±•ç¤ºï¼šåˆ—è¡¨çŠ¶æ€ç®¡ç†ã€CRUD æ“ä½œ

2. **Timer/Stopwatch**
   - ç›®å½•åï¼š`timer` / `stopwatch`
   - åŠŸèƒ½ï¼šå¼€å§‹ã€æš‚åœã€é‡ç½®è®¡æ—¶
   - é€‚åˆå±•ç¤ºï¼šæ—¶é—´çŠ¶æ€æ›´æ–°ã€å‘¨æœŸæ€§æ“ä½œ

3. **Theme Switcher**
   - ç›®å½•åï¼š`theme` / `settings`
   - åŠŸèƒ½ï¼šåˆ‡æ¢ä¸»é¢˜ï¼ˆæ—¥é—´/å¤œé—´æ¨¡å¼ï¼‰
   - é€‚åˆå±•ç¤ºï¼šå…¨å±€çŠ¶æ€ç®¡ç†ã€åå¥½è®¾ç½®

4. **Search**
   - ç›®å½•åï¼š`search`
   - åŠŸèƒ½ï¼šæœç´¢æ¡†ã€ç»“æœåˆ—è¡¨ã€åŠ è½½çŠ¶æ€
   - é€‚åˆå±•ç¤ºï¼šé˜²æŠ–ã€å¼‚æ­¥æœç´¢ã€ç©ºçŠ¶æ€å¤„ç†

5. **Form Validation**
   - ç›®å½•åï¼š`form`
   - åŠŸèƒ½ï¼šå¤šå­—æ®µè¡¨å•éªŒè¯
   - é€‚åˆå±•ç¤ºï¼šå¤æ‚éªŒè¯é€»è¾‘ã€å¤šæ­¥éª¤è¡¨å•

### 3. Login ç›®å½•å‘½åå»ºè®®

å·²é€‰æ‹©ï¼š**`login`** âœ…

**å¯é€‰æ–¹æ¡ˆå¯¹æ¯”**ï¼š

| ç›®å½•å | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|-------|------|------|--------|
| **login** âœ… | ç®€æ´ã€ç›´è§‚ã€æœ€å¸¸ç”¨ | æ— æ˜æ˜¾ç¼ºç‚¹ | â­â­â­â­â­ |
| auth | æ›´é€šç”¨ï¼ˆåŒ…å«æ³¨å†Œç­‰ï¼‰ | ç•¥æ˜¾æŠ½è±¡ | â­â­â­â­ |
| authentication | å®Œæ•´å‡†ç¡® | åç§°è¾ƒé•¿ | â­â­â­ |
| user | å¤ªå®½æ³› | åŒ…å«è¿‡å¤šæ¦‚å¿µ | â­â­ |
| session | ä¾§é‡ä¼šè¯ç®¡ç† | ä¸å¤Ÿç›´è§‚ | â­â­ |

**é€‰æ‹©ç†ç”±**ï¼š
- `login` æœ€ç®€æ´æ˜äº†
- æœ€ç¬¦åˆç”¨æˆ·å¿ƒæ™ºæ¨¡å‹
- åœ¨ Android å¼€å‘ä¸­æœ€å¸¸è§

## ğŸ“ æœ€ç»ˆé¡¹ç›®ç»“æ„

```
sample/
â”œâ”€â”€ count/                          # è®¡æ•°å™¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ CounterContract.kt          # Contract å®šä¹‰
â”‚   â”œâ”€â”€ CounterViewModel.kt         # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ CounterFragment.kt          # UI å±‚
â”‚   â””â”€â”€ COUNTER_SAMPLE_GUIDE.md     # è¯´æ˜æ–‡æ¡£
â”‚
â””â”€â”€ login/                          # ç™»å½•ç¤ºä¾‹ âœ… NEW
    â”œâ”€â”€ LoginContract.kt            # Contract å®šä¹‰
    â”œâ”€â”€ LoginViewModel.kt           # ä¸šåŠ¡é€»è¾‘
    â”œâ”€â”€ LoginFragment.kt            # UI å±‚
    â””â”€â”€ LOGIN_SAMPLE_GUIDE.md       # è¯´æ˜æ–‡æ¡£
```

## ğŸ¨ è®¾è®¡äº®ç‚¹

### 1. çŠ¶æ€è®¾è®¡
```kotlin
data class State(
    val isLoggedIn: Boolean = false,      // æ ¸å¿ƒçŠ¶æ€
    val username: String = "",            // ç”¨æˆ·æ•°æ®
    val isLoading: Boolean = false,       // UI çŠ¶æ€
    val errorMessage: String? = null,     // é”™è¯¯çŠ¶æ€
) {
    // è®¡ç®—å±æ€§ - åˆ†ç¦»ä¸šåŠ¡é€»è¾‘ä¸ UI é€»è¾‘
    val isLoginEnabled: Boolean
        get() = !isLoading && !isLoggedIn
    
    val statusText: String
        get() = when {
            isLoading -> "Processing..."
            isLoggedIn -> "Logged in as: $username"
            else -> "Not logged in"
        }
}
```

### 2. äº‹ä»¶è®¾è®¡
```kotlin
sealed interface Event : Mvi.Event {
    data class ShowToast(val message: String) : Event
    data object NavigateToHome : Event  // å¯¼èˆªäº‹ä»¶
}
```

### 3. æ„å›¾è®¾è®¡
```kotlin
sealed interface Intent : Mvi.Intent.Sequential {
    data class Login(val username: String, val password: String) : Intent
    data object Logout : Intent
    data object ClearError : Intent  // é”™è¯¯æ¸…é™¤
}
```

### 4. å¼‚æ­¥æµç¨‹å¤„ç†
```kotlin
private fun handleLogin(intent: Intent.Login): Flow<PartialChange> = flow {
    // å¤šé˜¶æ®µçŠ¶æ€å‘å°„
    emit(PartialChange { /* loading */ })
    randomDelay()
    emit(PartialChange { /* success */ })
    emit(PartialChange { /* event */ })
}
```

## ğŸ“Š Counter vs Login å¯¹æ¯”

| ç»´åº¦ | Counter | Login |
|-----|---------|-------|
| **å¤æ‚åº¦** | ç®€å• | ä¸­ç­‰ |
| **çŠ¶æ€å­—æ®µ** | 3 ä¸ª | 4 ä¸ª |
| **è®¡ç®—å±æ€§** | 3 ä¸ªï¼ˆæ˜¾ç¤ºï¼‰ | 3 ä¸ªï¼ˆæ§åˆ¶ï¼‰ |
| **å¼‚æ­¥æ“ä½œ** | Reset | Login/Logout |
| **è¡¨å•å¤„ç†** | âŒ | âœ… éªŒè¯ |
| **é”™è¯¯å¤„ç†** | Toast | éªŒè¯ + æ˜¾ç¤º |
| **å¯¼èˆª** | âŒ | âœ… NavigateToHome |
| **é€‚åˆåœºæ™¯** | å…¥é—¨å­¦ä¹  | å®é™…åº”ç”¨ |

## ğŸš€ åç»­æ‰©å±•

### Counter å¯èƒ½çš„æ‰©å±•ï¼š
- æ·»åŠ æ­¥é•¿è®¾ç½®
- å†å²è®°å½•
- å¤šä¸ªè®¡æ•°å™¨

### Login å¯èƒ½çš„æ‰©å±•ï¼š
- æ³¨å†ŒåŠŸèƒ½
- å¯†ç æ‰¾å›
- ç”Ÿç‰©è¯†åˆ«
- OAuth ç™»å½•
- Token ç®¡ç†

## âœ… æ„å»ºéªŒè¯

é¡¹ç›®å·²æˆåŠŸç¼–è¯‘ï¼Œæ— é”™è¯¯ï¼š
```bash
BUILD SUCCESSFUL in 1m 1s
69 actionable tasks: 69 executed
```

è­¦å‘Šä»…ä¸ºæœªä½¿ç”¨çš„å‚æ•°ï¼ˆç¬¦åˆé¢„æœŸï¼‰ã€‚

## ğŸ“– æ–‡æ¡£èµ„æº

- **Counter ç¤ºä¾‹**: `COUNTER_SAMPLE_GUIDE.md`
- **Login ç¤ºä¾‹**: `LOGIN_SAMPLE_GUIDE.md`
- **æ€»ä½“è¯´æ˜**: `SAMPLE_README.md`

## ğŸ’¡ æœ€ä½³å®è·µæ€»ç»“

1. **å‘½åä¸€è‡´æ€§**ï¼šåŒä¸€æ¨¡å—å†…ä¿æŒå‘½åé£æ ¼ç»Ÿä¸€
2. **è®¡ç®—å±æ€§**ï¼šåˆ†ç¦»ä¸šåŠ¡é€»è¾‘ä¸ UI çŠ¶æ€
3. **å‡½æ•°å¼ç¼–ç¨‹**ï¼šä½¿ç”¨ Flow å¤„ç†å¤æ‚å¼‚æ­¥
4. **æ¸…æ™°åˆ†ç»„**ï¼šç›¸å…³ Intent åˆ†ç»„ï¼ˆå¦‚ counterIntentsï¼‰
5. **æ–‡æ¡£å®Œå–„**ï¼šæ¯ä¸ªç¤ºä¾‹éƒ½æœ‰è¯¦ç»†çš„ Guide

---

**ç»“è®º**ï¼šLoginContract è®¾è®¡å®Œæˆï¼Œç¬¦åˆ MVI æ¶æ„æœ€ä½³å®è·µï¼Œå¯ä½œä¸ºå®é™…é¡¹ç›®çš„å‚è€ƒæ¨¡æ¿ã€‚

